<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <bpmn:process id="chatchw_flow" isExecutable="false">
    <bpmn:startEvent id="startEvent" name="Start"/>
    <bpmn:userTask id="askDiarrhea" name="Ask diarrhea"/>
    <bpmn:exclusiveGateway id="diarrheaPresent" name="Diarrhea present?"/>
    <bpmn:userTask id="collectDiarrheaDetails" name="Collect diarrhea details"/>
    <bpmn:userTask id="askFeverMalaria" name="Ask fever/malaria"/>
    <bpmn:userTask id="askCoughPneumonia" name="Ask cough/pneumonia"/>
    <bpmn:userTask id="askMalnutrition" name="Ask malnutrition"/>
    <bpmn:businessRuleTask id="evaluateDecisions" name="Evaluate decisions" decisionRef="aggregate_final"/>
    <bpmn:exclusiveGateway id="mainTriage" name="Main triage"/>
    <bpmn:endEvent id="hospital" name="Hospital"/>
    <bpmn:endEvent id="clinic" name="Clinic"/>
    <bpmn:endEvent id="home" name="Home"/>

    <bpmn:sequenceFlow id="flow1" sourceRef="startEvent" targetRef="askDiarrhea"/>
    <bpmn:sequenceFlow id="flow2" sourceRef="askDiarrhea" targetRef="diarrheaPresent"/>
    <bpmn:sequenceFlow id="flow3" sourceRef="diarrheaPresent" targetRef="collectDiarrheaDetails">
      <bpmn:conditionExpression xsi:type="tFormalExpression">diarrhea == true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="flow4" sourceRef="diarrheaPresent" targetRef="askFeverMalaria">
      <bpmn:conditionExpression xsi:type="tFormalExpression">diarrhea == false</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="flow5" sourceRef="collectDiarrheaDetails" targetRef="askFeverMalaria"/>
    <bpmn:sequenceFlow id="flow6" sourceRef="askFeverMalaria" targetRef="askCoughPneumonia"/>
    <bpmn:sequenceFlow id="flow7" sourceRef="askCoughPneumonia" targetRef="askMalnutrition"/>
    <bpmn:sequenceFlow id="flow8" sourceRef="askMalnutrition" targetRef="evaluateDecisions"/>
    <bpmn:sequenceFlow id="flow9" sourceRef="evaluateDecisions" targetRef="mainTriage"/>
    <bpmn:sequenceFlow id="flow10" sourceRef="mainTriage" targetRef="hospital">
      <bpmn:conditionExpression xsi:type="tFormalExpression">danger_sign == true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="flow11" sourceRef="mainTriage" targetRef="clinic">
      <bpmn:conditionExpression xsi:type="tFormalExpression">clinic_referral == true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="flow12" sourceRef="mainTriage" targetRef="home" name="Default"/>
  </bpmn:process>
</bpmn:definitions>