<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Defs" targetNamespace="urn:flow">
  <bpmn:process id="AskEvaluateRoute" name="Ask Evaluate Route" isExecutable="true">
    <bpmn:startEvent id="Start" name="Start"/>
    <bpmn:userTask id="AskTask" name="Ask Questions"/>
    <bpmn:businessRuleTask id="EvaluateDMN" name="Evaluate DMN" implementation="http://www.omg.org/spec/DMN/20191111/MODEL/" />
    <bpmn:exclusiveGateway id="RouteGateway" name="Route by triage"/>
    <bpmn:endEvent id="EndHome" name="Home">
      <bpmn:terminateEventDefinition xsi:nil="true"/>
    </bpmn:endEvent>
    <bpmn:endEvent id="EndClinic" name="Clinic">
      <bpmn:terminateEventDefinition xsi:nil="true"/>
    </bpmn:endEvent>
    <bpmn:endEvent id="EndHospital" name="Hospital">
      <bpmn:terminateEventDefinition xsi:nil="true"/>
    </bpmn:endEvent>

    <bpmn:sequenceFlow id="f1" sourceRef="Start" targetRef="AskTask"/>
    <bpmn:sequenceFlow id="f2" sourceRef="AskTask" targetRef="EvaluateDMN"/>
    <bpmn:sequenceFlow id="f3" sourceRef="EvaluateDMN" targetRef="RouteGateway"/>

    <bpmn:sequenceFlow id="toHome" sourceRef="RouteGateway" targetRef="EndHome" name="triage == 'home'">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression"><![CDATA[${triage == 'home'}]]></bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="toClinic" sourceRef="RouteGateway" targetRef="EndClinic" name="triage == 'clinic'">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression"><![CDATA[${triage == 'clinic'}]]></bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="toHospital" sourceRef="RouteGateway" targetRef="EndHospital" name="triage == 'hospital'">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression"><![CDATA[${triage == 'hospital'}]]></bpmn:conditionExpression>
    </bpmn:sequenceFlow>
  </bpmn:process>
</bpmn:definitions>