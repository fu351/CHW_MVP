<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <bpmn:process id="chatchw_flow" isExecutable="false">
    <bpmn:startEvent id="start" name="Start"/>
    <bpmn:userTask id="ask_diarrhea" name="Ask diarrhea"/>
    <bpmn:exclusiveGateway id="diarrhea_present" name="Diarrhea present?"/>
    <bpmn:userTask id="collect_diarrhea_details" name="Collect diarrhea details"/>
    <bpmn:userTask id="ask_fever_malaria" name="Ask fever/malaria"/>
    <bpmn:userTask id="ask_cough_pneumonia" name="Ask cough/pneumonia"/>
    <bpmn:userTask id="ask_malnutrition" name="Ask malnutrition"/>
    <bpmn:businessRuleTask id="evaluate_decisions" name="Evaluate decisions" decisionRef="aggregate_final"/>
    <bpmn:exclusiveGateway id="main_triage" name="Main triage"/>
    <bpmn:endEvent id="hospital" name="Hospital"/>
    <bpmn:endEvent id="clinic" name="Clinic"/>
    <bpmn:endEvent id="home" name="Home"/>
    
    <bpmn:sequenceFlow id="flow1" sourceRef="start" targetRef="ask_diarrhea"/>
    <bpmn:sequenceFlow id="flow2" sourceRef="ask_diarrhea" targetRef="diarrhea_present"/>
    <bpmn:sequenceFlow id="flow3" sourceRef="diarrhea_present" targetRef="collect_diarrhea_details">
      <bpmn:conditionExpression xsi:type="tFormalExpression">diarrhea == true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="flow4" sourceRef="diarrhea_present" targetRef="ask_fever_malaria">
      <bpmn:conditionExpression xsi:type="tFormalExpression">diarrhea == false</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="flow5" sourceRef="collect_diarrhea_details" targetRef="ask_fever_malaria"/>
    <bpmn:sequenceFlow id="flow6" sourceRef="ask_fever_malaria" targetRef="ask_cough_pneumonia"/>
    <bpmn:sequenceFlow id="flow7" sourceRef="ask_cough_pneumonia" targetRef="ask_malnutrition"/>
    <bpmn:sequenceFlow id="flow8" sourceRef="ask_malnutrition" targetRef="evaluate_decisions"/>
    <bpmn:sequenceFlow id="flow9" sourceRef="evaluate_decisions" targetRef="main_triage"/>
    <bpmn:sequenceFlow id="flow10" sourceRef="main_triage" targetRef="hospital">
      <bpmn:conditionExpression xsi:type="tFormalExpression">danger_sign == true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="flow11" sourceRef="main_triage" targetRef="clinic">
      <bpmn:conditionExpression xsi:type="tFormalExpression">clinic_referral == true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="flow12" sourceRef="main_triage" targetRef="home" name="Default"/>
  </bpmn:process>
</bpmn:definitions>